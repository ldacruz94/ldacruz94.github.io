---
interface Props {
	projects: Array<{
		type: string;
		technologies: string[];
		[key: string]: any;
	}>;
}

const { projects } = Astro.props;
const projectTypes = Array.from(new Set(projects.filter((project) => project.type).map((project) => project.type)));
const projectTechs = Array.from(new Set(projects.flatMap((project) => project.technologies || []))).sort();
---

<div class="filter-container">
	<div class="filter-group">
		<label for="type-filter">Filter by type:</label>
		<select id="type-filter" onchange="filterProjects(event)">
			<option value="">All Types</option>
			{projectTypes.map((type: string) => (
				<option value={type}>{type}</option>
			))}
		</select>
	</div>
	
	<div class="filter-group">
		<label for="tech-filter">Filter by technology:</label>
		<select id="tech-filter" onchange="filterProjects(event)">
			<option value="">All Technologies</option>
			{projectTechs.map((tech: string) => (
				<option value={tech}>{tech}</option>
			))}
		</select>
	</div>
</div>

<style>
	.filter-container {
		display: flex;
		align-items: flex-end;
		margin-bottom: 1.5em;
		gap: 1em;
		flex-wrap: wrap;
	}

	.filter-group {
		display: flex;
		flex-direction: column;
		gap: 0.4em;
	}

	.filter-container label {
		font-weight: bold;
		font-size: 0.9em;
	}

	.filter-container select {
		padding: 0.6em 1em;
		border: 2px solid rgb(var(--gray));
		border-radius: 6px;
		font-size: 1em;
		background-color: rgb(var(--gray-light));
		color: rgb(var(--gray-dark));
		font-weight: 500;
		cursor: pointer;
		transition: all 0.2s ease;
		appearance: none;
		background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
		background-repeat: no-repeat;
		background-position: right 0.7em center;
		background-size: 1.2em;
		padding-right: 2.5em;
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
	}

	.filter-container select:hover {
		border-color: rgb(var(--accent));
		background-color: rgb(var(--gray-light));
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
	}

	.filter-container select:focus {
		outline: none;
		border-color: rgb(var(--accent));
		box-shadow: 0 0 0 3px rgba(var(--accent-rgb), 0.1);
	}

	.filter-container select:hover {
		border-color: rgb(var(--accent));
		background-color: rgb(var(--gray-light));
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
	}

	.filter-container select:focus {
		outline: none;
		border-color: rgb(var(--accent));
		box-shadow: 0 0 0 3px rgba(var(--accent-rgb), 0.1);
	}
</style>
